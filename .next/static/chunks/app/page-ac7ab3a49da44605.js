(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7687:function(e,s,t){Promise.resolve().then(t.bind(t,6911))},6911:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(7437),r=t(2265);function n(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),p=async s=>{if(s.preventDefault(),!e)return;x(!0),g(null);let t=new FormData;t.append("image",e);try{let e=await fetch("/api/analyze-meal",{method:"POST",body:t}),s=await e.json();e.ok?(n(s.macros),i(s.ingredients||[]),console.log("Ingredients:",s.ingredients||[]),c(s.source),m(s.note)):g(s.error||"An error occurred.")}catch(e){g("An error occurred while analyzing the meal.")}finally{x(!1)}};return(0,a.jsx)("main",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:(0,a.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-blue-500 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),(0,a.jsx)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20",children:(0,a.jsx)("div",{className:"max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"divide-y divide-gray-200",children:[(0,a.jsxs)("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Meal Macro Analyzer"}),(0,a.jsxs)("form",{onSubmit:p,className:"mt-8 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"meal-photo",className:"block text-sm font-medium text-gray-700",children:"Upload a meal photo"}),(0,a.jsx)("input",{type:"file",id:"meal-photo",name:"meal-photo",accept:"image/*",onChange:e=>{e.target.files&&s(e.target.files[0])},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:!e||u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:u?"Analyzing...":"Analyze Meal"})})]})]}),d&&(0,a.jsx)("p",{className:"text-gray-500",children:d}),l&&l.length>0&&(0,a.jsxs)("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Ingredients:"}),(0,a.jsx)("ul",{className:"list-disc pl-5",children:l.map((e,s)=>(0,a.jsxs)("li",{children:[e.name,": Protein ",e.protein,"g, Carbs ",e.carbs,"g, Fat ",e.fat,"g"]},s))})]}),t&&(0,a.jsxs)("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Total Macro Nutrients:"}),(0,a.jsxs)("p",{children:["Protein: ",t.protein,"g"]}),(0,a.jsxs)("p",{children:["Carbs: ",t.carbs,"g"]}),(0,a.jsxs)("p",{children:["Fat: ",t.fat,"g"]}),(0,a.jsxs)("p",{children:["Source: ",o]})]}),f&&(0,a.jsx)("p",{className:"text-red-500 mt-4",children:f})]})})})]})})}},622:function(e,s,t){"use strict";var a=t(2265),r=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,s,t){var a,o={},c=null,d=null;for(a in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)n.call(s,a)&&!i.hasOwnProperty(a)&&(o[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===o[a]&&(o[a]=s[a]);return{$$typeof:r,type:e,key:c,ref:d,props:o,_owner:l.current}}s.jsx=o,s.jsxs=o},7437:function(e,s,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=7687)}),_N_E=e.O()}]);